<!-- nice_sweetsï¼šå…¨é …ç›®ã‚’ã‚«ãƒ¼ãƒ‰å‹ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³UIã§çµ±ä¸€ï¼ˆã‚¹ãƒãƒ›æœ€é©åŒ–ï¼‰ -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nice_sweets ãƒ¬ã‚¸ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</title>
  <style>
	body{font-family:-apple-system,BlinkMacSystemFont,"Noto Sans JP",sans-serif;margin:0;background:#f8f9fa;color:#111;line-height:1.7;font-size:16px}
	.wrapper{max-width:520px;margin:0 auto;padding:14px}
	h1{text-align:center;font-size:20px;color:#e11d48;margin:8px 0}
	.desc{text-align:center;font-size:13px;color:#6b7280;margin:0 0 18px}
	.section{background:#fff;border-radius:12px;margin-bottom:14px;overflow:hidden;box-shadow:0 1px 6px rgba(0,0,0,.1)}
	.header{padding:12px;display:flex;justify-content:space-between;gap:10px;cursor:pointer;user-select:none}
	.header-title{font-size:16px;font-weight:600}
	.sub-title{font-size:13px;color:#6b7280}
	.arrow{transition:.2s}
	.open>.header .arrow{transform:rotate(90deg)}
	.body{display:none;padding:12px;background:#f9fafb}
	.open>.body{display:block}
	.steps{margin:10px 0 0}
	.steps li{margin-bottom:8px;font-size:15px}
	.step-note{margin:4px 0 0 12px;font-size:13px;color:#b45309}
	.img-box{margin-top:12px;border-radius:10px;background:#e5e7eb;padding:10px;text-align:center}
	.img-box img{max-width:100%;border-radius:8px}
	.point{margin-top:12px;padding:10px;background:#fff7ed;border-left:4px solid #fb923c;border-radius:6px;font-size:14px;color:#b45309}
	.ingredient-box{margin-top:12px;padding:12px;border-radius:10px;background:#fee2e2;border:1px solid #fecaca}
	.ingredient-box h4{margin:0 0 6px;font-size:14px;color:#b91c1c}
	.ingredient-box p{margin:4px 0;font-size:14px}
	.ingredient-box .note{margin-top:6px;font-size:13px;color:#b91c1c;font-weight:600}
	.body .section{margin:12px 0 0;box-shadow:0 1px 4px rgba(0,0,0,.08)}
  </style>
<script>
    async function loadChecks() {
      const userId = window.MANUAL_USER_ID;
      const store  = window.MANUAL_STORE;
      const type   = window.MANUAL_TYPE;

      if (!userId || !store || !type) {
        console.warn("ãƒã‚§ãƒƒã‚¯ãƒ­ãƒ¼ãƒ‰ä¸å¯: userId/store/type ãŒä¸è¶³");
        return;
      }

      const res = await fetch(
        `/${store}/api/manual-check?userId=${userId}&type=${type}`
      );
      // ğŸ”½ JSON ä»¥å¤–ã¯ç„¡è¦–ï¼ˆHTMLãŒè¿”ã£ã¦ãã¦ã‚‚è½ã¡ãªã„ï¼‰
      const contentType = res.headers.get("content-type") || "";
      if (!contentType.includes("application/json")) {
        console.warn("manual-check ãŒ JSON ã‚’è¿”ã—ã¦ã„ã¾ã›ã‚“");
        return;
      }

      const data = await res.json();

      // åæ˜ 
      document.querySelectorAll(".check-item").forEach(el => {
        const key = el.dataset.key;
        el.checked = data[key] === true;
      });
    }


    // ãƒã‚§ãƒƒã‚¯å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
    async function toggleCheck(key) {
      const userId = window.MANUAL_USER_ID;
      const store  = window.MANUAL_STORE;   // â† ã“ã‚Œã‚’å¿…ãšä½¿ã†
      const type   = window.MANUAL_TYPE;

      if (!userId || !store || !type) {
        console.warn("toggleCheck: å¿…è¦ãªæƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã¾ã™");
        return;
      }

      const res = await fetch(`/${store}/manual-check`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          userId,
          type,
          recipeId: key
        })
      });

      const out = await res.json();
      console.log("CHECK UPDATED:", out);
    }

    window.addEventListener("DOMContentLoaded", loadChecks);
  </script>

  <script>
    function saveCheck(key) {
      toggleCheck(key);
    }
  </script>
</head>
<body>
<div class="wrapper">
	<h1>nice_sweets ãƒ¬ã‚¸ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</h1>
	<!-- ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰ -->
	<div class="section">
		<div class="header">
			<div class="header-title recipe-name" data-recipe-id="ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰">ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰</div>
			<div class="arrow">â–¶</div>
		</div>
		<div class="body">
			<ol class="steps">
				<li>USENãƒ¬ã‚¸ã‚¢ãƒ—ãƒªã‚’ã‚¿ãƒƒãƒ—</li>
				<li>æ‹…å½“è€…ã‹ã‚‰è‡ªåˆ†ã®åå‰ã‚’é¸æŠ</li>
				<li>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼šã€Œ<strong>nice1111</strong>ã€<strong>ï¼ˆå…±é€šï¼‰</strong>ã‚’å…¥åŠ›ã—ã€ã€Œ<strong>Login</strong>ã€ã‚’æŠ¼ã™</li>
				<li>å¿…ãšé‡‘ç¨®åˆ¥ã§é‡‘é¡ç¢ºèªã‚’è¡Œã†</li>
				<li>ã€Œ<strong>å³ä¼šè¨ˆ</strong>ã€ã‚’æŠ¼ã™</li>
				<li>æ‹…å½“è€…é¸æŠã‹ã‚‰è‡ªåˆ†ã®åå‰ã‚’é¸æŠ</li>
				<li>æ‹…å½“è€…ã‹ã‚‰è‡ªåˆ†ã®åå‰ã‚’é¸æŠ</li>
			</ol>
			<div class="img-box"><img src="/manuals/nice_sweets/todo/nice_sweets/image.png"></div>
		</div>
		<div class="check-wrap">
			<input type="checkbox" class="check-item" data-key="ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰" onclick="toggleCheck('ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰')">
			<label for="chk-potato">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</label>
		</div>
		</div>
	</div>

	<!-- æ³¨æ–‡æ“ä½œï¼ˆä¼šè¨ˆï¼‰ -->
	<div class="section">
		<div class="header">
			<div class="header-title recipe-name" data-recipe-id="æ³¨æ–‡æ“ä½œï¼ˆä¼šè¨ˆï¼‰">æ³¨æ–‡æ“ä½œï¼ˆä¼šè¨ˆï¼‰</div>
			<div class="arrow">â–¶</div>
		</div>
		<div class="body">
			<ol class="steps">
				<li>ã€Œ<strong>æ³¨æ–‡</strong>ã€ã‚’æŠ¼ã™</li>
				<li>æ³¨æ–‡å†…å®¹ã‚’é¸æŠã—ã€ã€Œ<strong>æ³¨æ–‡ç¢ºå®š</strong>ã€ã‚’æŠ¼ã™ï¼ˆå€‹æ•°ã‚‚ç¢ºèªã™ã‚‹ï¼‰</li>
				<li>ãŠé ã‹ã‚Šé‡‘é¡ã‚’å…¥åŠ›ã—ã€ã€Œ<strong>ä¼šè¨ˆå®Œäº†</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ï¼ˆãŠå®¢æ§˜æƒ…å ±ç”»é¢ï¼‰ã€Œ<strong>ç™»éŒ²</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ä¼šè¨ˆå®Œäº†ç”»é¢ã§ã€Œ<strong>ãƒ¬ã‚·ãƒ¼ãƒˆç™ºè¡Œ</strong>ã€ã‚’æŠ¼ã™ï¼ˆå¿…ãšï¼ï¼‰
					<div class="step-note">â€» é ˜åæ›¸ãŒå¿…è¦ãªå ´åˆã¯ã€Œ<strong>é ˜åæ›¸ç™ºè¡Œ</strong>ã€ã‚’æŠ¼ã™</div>
				</li>
			</ol>
			<div class="img-box"><img src="/manuals/nice_sweets/todo/nice_sweets/image%201.png"></div>
		</div>
		<div class="check-wrap">
			<input type="checkbox" class="check-item" data-key="ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰" onclick="toggleCheck('ãƒ¬ã‚¸ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆé–‹åº—æ™‚ï¼‰')">
			<label for="chk-potato">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</label>
		</div>
		</div>
	</div>

	<!-- ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆé–‰åº—æ™‚ï¼‰ -->
	<div class="section">
		<div class="header">
			<div class="header-title recipe-name" data-recipe-id="ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆé–‰åº—æ™‚ï¼‰">ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆé–‰åº—æ™‚ï¼‰</div>
			<div class="arrow">â–¶</div>
		</div>
		<div class="body">
			<ol class="steps">
				<li>ã€Œ<strong>ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚º</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ã€Œ<strong>é‡‘ç¨®åˆ¥å…¥åŠ›</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ãƒ¬ã‚¸ã‚’éµã§é–‹ã‘ã¦é‡‘ç¨®åˆ¥ã§æ•°ãˆã‚‹</li>
				<li>é‡‘ç¨®åˆ¥ã§æ•°å­—ã‚’å…¥åŠ›ã—ã€ã€Œ<strong>ç¢ºå®š</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ã€Œ<strong>ç¢ºå®š</strong>ã€ã‚’æŠ¼ã™</li>
				<li>ï¼ˆç¢ºèªç”»é¢ï¼‰ã€Œ<strong>OK</strong>ã€ã‚’æŠ¼ã™</li>
			</ol>
			<div class="img-box"><img src="/manuals/nice_sweets/todo/nice_sweets/image%202.png"></div>
		</div>
		<div class="check-wrap">
			<input type="checkbox" class="check-item" data-key="ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆé–‰åº—æ™‚ï¼‰" onclick="toggleCheck('ãƒ¬ã‚¸ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆé–‰åº—æ™‚ï¼‰')">
			<label for="chk-potato">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</label>
		</div>
		</div>
	</div>

</div>

<script>
(function(){
  document.querySelectorAll('.section > .header').forEach(h=>{
    h.addEventListener('click',e=>{
      e.stopPropagation();
      h.parentElement.classList.toggle('open');
    });
  });
})();
</script>
</body>
</html>
