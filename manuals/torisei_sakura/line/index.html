<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸²ç„¼ãåº—ãƒ¬ã‚·ãƒ”ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</title>
  <style>
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Noto Sans JP",sans-serif;
      margin:0;background:#f8f9fa;color:#111;
      line-height:1.7;font-size:16px;
    }
    .wrapper{max-width:520px;margin:0 auto;padding:14px;}
    h1{text-align:center;font-size:20px;color:#e11d48;margin-bottom:8px;}
    .section{
      background:#fff;border-radius:12px;
      margin-bottom:14px;overflow:hidden;
      box-shadow:0 1px 6px rgba(0,0,0,0.1);
    }
    .header{
      padding:12px;display:flex;justify-content:space-between;
      cursor:pointer;user-select:none;
      background:#fff;
    }
    .header-title{font-size:16px;font-weight:600;}
    .arrow{transition:0.2s;}
    .open .arrow{transform:rotate(90deg);}
    .body{display:none;padding:12px;background:#f9fafb;}
    .open .body{display:block;}
    .img-box{
      margin-top:10px;border-radius:10px;background:#e5e7eb;
      padding:10px;display:flex;gap:10px;
    }
    .img-thumb{
      width:80px;height:80px;background:#d1d5db;
      border-radius:8px;display:flex;
      justify-content:center;align-items:center;
      font-size:12px;text-align:center;padding:4px;
    }
    .steps{margin-top:8px;}
    .steps li{margin-bottom:6px;font-size:14px;}
    .point{
      margin-top:10px;padding:10px;background:#fff7ed;
      border-left:4px solid #fb923c;border-radius:6px;
      font-size:14px;color:#b45309;
    }
    .sub-title{font-size:14px;color:#6b7280;margin-bottom:4px;}
    .highlight-count {
      color: #dc2626;
      font-weight: 700;
    }
    /* å†™çœŸã‚¨ãƒªã‚¢ï¼ˆnice_sweetsé¢¨ï¼‰ */
    .photo-box {
      margin: 12px 0;
      padding: 10px;
      background: #e5e7eb;
      border-radius: 14px;
    }

    /* ç”»åƒã‚°ãƒªãƒƒãƒ‰ */
    .photo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 8px;
    }

    /* å†™çœŸãã®ã‚‚ã® */
    .photo-grid img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 10px;
      object-fit: cover;
      background: #d1d5db;
    }
    .prep-title {
      font-weight: 700;
      margin-bottom: 6px;
    }

    .prep-list {
      padding-left: 18px;
      margin: 0;
    }

    .prep-list li {
      margin-bottom: 6px;
      line-height: 1.6;
    }

  </style>
<script>
    async function loadChecks() {
      const userId = window.MANUAL_USER_ID;
      const store  = window.MANUAL_STORE;
      const type   = window.MANUAL_TYPE;

      if (!userId || !store || !type) {
        console.warn("ãƒã‚§ãƒƒã‚¯ãƒ­ãƒ¼ãƒ‰ä¸å¯: userId/store/type ãŒä¸è¶³");
        return;
      }

      const res = await fetch(
        `/${store}/api/manual-check?userId=${userId}&type=${type}`
      );
      // ğŸ”½ JSON ä»¥å¤–ã¯ç„¡è¦–ï¼ˆHTMLãŒè¿”ã£ã¦ãã¦ã‚‚è½ã¡ãªã„ï¼‰
      const contentType = res.headers.get("content-type") || "";
      if (!contentType.includes("application/json")) {
        console.warn("manual-check ãŒ JSON ã‚’è¿”ã—ã¦ã„ã¾ã›ã‚“");
        return;
      }

      const data = await res.json();

      // åæ˜ 
      document.querySelectorAll(".check-item").forEach(el => {
        const key = el.dataset.key;
        el.checked = data[key] === true;
      });
    }


    // ãƒã‚§ãƒƒã‚¯å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
    async function toggleCheck(key) {
      const userId = window.MANUAL_USER_ID;
      const store  = window.MANUAL_STORE;   // â† ã“ã‚Œã‚’å¿…ãšä½¿ã†
      const type   = window.MANUAL_TYPE;

      if (!userId || !store || !type) {
        console.warn("toggleCheck: å¿…è¦ãªæƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã¾ã™");
        return;
      }

      const res = await fetch(`/${store}/manual-check`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          userId,
          type,
          recipeId: key
        })
      });

      const out = await res.json();
      console.log("CHECK UPDATED:", out);
    }

    window.addEventListener("DOMContentLoaded", loadChecks);
  </script>

  <script>
    function saveCheck(key) {
      toggleCheck(key);
    }
  </script>
</head>
<body>

<div class="wrapper">
  <h1>ä¸²ç„¼ããƒ¬ã‚·ãƒ”ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</h1>

	<div class="section">
		<div class="header"><div><div class="header-title">ãƒ‰ãƒªãƒ³ã‚¯</div></div><div class="arrow">â–¶</div></div>
		<div class="body">
      <!-- 1. ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ -->
      <div class="section">
        <div class="header">
          <div>
            <div class="header-title recipe-name" data-recipe-id="ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯">ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯</div>
          </div>
          <div class="arrow">â–¶</div>
        </div>
        <div class="body">
          <strong>ææ–™ï¼ˆ1æ¯ï¼‰</strong><br>
          ãƒ»ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ï¼šé©é‡<br>
          ãƒ»æ°·ï¼š5ã¤  

          <div class="photo-box">
            <div class="photo-grid">
              <img src="/manuals/torisei_sakura/line/torisei_sakura/ã‚¦ãƒ¼ãƒ­ãƒ³èŒ¶_.jpg" alt="å®Œæˆä¾‹">
            </div>
          </div>

          <ol class="steps">
            <li>ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ã‚°ãƒ©ã‚¹ã«æ°·ã‚’<span class="highlight-count">5ã¤</span>å…¥ã‚Œã€ã‚°ãƒ©ã‚¹ã«æ·»ã‚ã›ãªãŒã‚‰æ³¨ã</li>
          </ol>

          <div class="check-wrap">
            <input type="checkbox" class="check-item" data-key="ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯" onclick="toggleCheck('ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯')">
            <span class="check-text">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</span>
          </div>
        </div>
      </div>

      <!-- 2. ã‚«ãƒ«ãƒ”ã‚¹ -->
      <div class="section">
        <div class="header">
          <div>
            <div class="header-title recipe-name" data-recipe-id="ã‚«ãƒ«ãƒ”ã‚¹">ã‚«ãƒ«ãƒ”ã‚¹</div>
          </div>
          <div class="arrow">â–¶</div>
        </div>
        <div class="body">
          <strong>ææ–™ï¼ˆ1æ¯ï¼‰</strong><br>
          ãƒ»ã‚«ãƒ«ãƒ”ã‚¹ï¼šé©é‡<br>
          ãƒ»æ°´ï¼šé©é‡<br>
          ãƒ»æ°·ï¼š5ã¤  

          <div class="photo-box">
            <div class="photo-grid">
              <img src="/manuals/torisei_sakura/line/torisei_sakura/ã‚«ãƒ«ãƒ’ã‚šã‚¹ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼.jpg" alt="å®Œæˆä¾‹">
            </div>
          </div>

          <ol class="steps">
            <li>ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ã‚°ãƒ©ã‚¹ã«æ°·ã‚’<span class="highlight-count">5ã¤</span>å…¥ã‚Œã€ãƒãƒ³ãƒ—ã‚’ä¸‹3å›ï¼ˆ25Ã—3ï¼‰</li>
            <li>æ°´ã‚’å…¥ã‚Œã€ãƒãƒ‰ãƒ©ãƒ¼ã§ã‚ˆãæ··ãœã‚‹</li>
          </ol>

          <div class="point">
            âœ” é•·ã­ãã¯ç„¼ãéãã‚‹ã¨å´©ã‚Œã‚‹ã®ã§è£è¿”ã—ã¯1å›ã ã‘  
            âœ” è‚‰ã¯åˆºã—éããšãµã‚“ã‚ã‚Šåˆºã™ã¨ç«ãŒé€šã‚Šã‚„ã™ã„
          </div>
          <div class="check-wrap">
            <input type="checkbox" class="check-item" data-key="ã‚«ãƒ«ãƒ”ã‚¹" onclick="toggleCheck('ã‚«ãƒ«ãƒ”ã‚¹')">
            <span class="check-text">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</span>
          </div>
        </div>
      </div>
		</div>

    <div class="section">
      <div class="header"><div><div class="header-title">ç„¼é…</div></div><div class="arrow">â–¶</div></div>
      <div class="body">
        <!-- 1. ç„¼é… -->
        <div class="section">
          <div class="header">
            <div>
              <div class="header-title recipe-name" data-recipe-id="ç„¼é…ã€ãƒ­ãƒƒã‚¯ã€‘">ç„¼é…ã€ãƒ­ãƒƒã‚¯ã€‘</div>
            </div>
            <div class="arrow">â–¶</div>
          </div>
          <div class="body">
            <strong>ææ–™ï¼ˆ1æ¯ï¼‰</strong><br>
            ãƒ»ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ï¼šé©é‡<br>
            ãƒ»æ°·ï¼š5ã¤  

            <div class="photo-box">
              <div class="photo-grid">
                <img src="/manuals/torisei_sakura/line/torisei_sakura/ã‚¦ãƒ¼ãƒ­ãƒ³èŒ¶_.jpg" alt="å®Œæˆä¾‹">
              </div>
            </div>

            <ol class="steps">
              <li>ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ã‚°ãƒ©ã‚¹ã«æ°·ã‚’<span class="highlight-count">5ã¤</span>å…¥ã‚Œã€ã‚°ãƒ©ã‚¹ã«æ·»ã‚ã›ãªãŒã‚‰æ³¨ã</li>
            </ol>

            <div class="check-wrap">
              <input type="checkbox" class="check-item" data-key="ç„¼é…ã€ãƒ­ãƒƒã‚¯ã€‘" onclick="toggleCheck('ç„¼é…ã€ãƒ­ãƒƒã‚¯ã€‘')">
              <span class="check-text">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</span>
            </div>
          </div>
        </div>

        <!-- 2. ã‚«ãƒ«ãƒ”ã‚¹ -->
        <div class="section">
          <div class="header">
            <div>
              <div class="header-title recipe-name" data-recipe-id="ã‚«ãƒ«ãƒ”ã‚¹">ã‚«ãƒ«ãƒ”ã‚¹</div>
            </div>
            <div class="arrow">â–¶</div>
          </div>
          <div class="body">
            <strong>ææ–™ï¼ˆ1æ¯ï¼‰</strong><br>
            ãƒ»ã‚«ãƒ«ãƒ”ã‚¹ï¼šé©é‡<br>
            ãƒ»æ°´ï¼šé©é‡<br>
            ãƒ»æ°·ï¼š5ã¤  

            <div class="photo-box">
              <div class="photo-grid">
                <img src="/manuals/torisei_sakura/line/torisei_sakura/ã‚«ãƒ«ãƒ’ã‚šã‚¹ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼.jpg" alt="å®Œæˆä¾‹">
              </div>
            </div>

            <ol class="steps">
              <li>ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ã‚°ãƒ©ã‚¹ã«æ°·ã‚’<span class="highlight-count">5ã¤</span>å…¥ã‚Œã€ãƒãƒ³ãƒ—ã‚’ä¸‹3å›ï¼ˆ25Ã—3ï¼‰</li>
              <li>æ°´ã‚’å…¥ã‚Œã€ãƒãƒ‰ãƒ©ãƒ¼ã§ã‚ˆãæ··ãœã‚‹</li>
            </ol>

            <div class="point">
              âœ” é•·ã­ãã¯ç„¼ãéãã‚‹ã¨å´©ã‚Œã‚‹ã®ã§è£è¿”ã—ã¯1å›ã ã‘  
              âœ” è‚‰ã¯åˆºã—éããšãµã‚“ã‚ã‚Šåˆºã™ã¨ç«ãŒé€šã‚Šã‚„ã™ã„
            </div>
            <div class="check-wrap">
              <input type="checkbox" class="check-item" data-key="ã‚«ãƒ«ãƒ”ã‚¹" onclick="toggleCheck('ã‚«ãƒ«ãƒ”ã‚¹')">
              <span class="check-text">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</span>
            </div>
          </div>
        </div>
      </div>
    </div>

	</div>

  <div class="section">
    <!-- ãƒ•ãƒ¼ãƒ‰ -->
    <div class="header">
      <div>
        <div class="header-title">ãƒ•ãƒ¼ãƒ‰</div>
      </div>
      <div class="arrow">â–¶</div>
    </div>

    <div class="body">

      <!-- å‰µä½œå°çš¿ã‚«ãƒ†ã‚´ãƒª -->
      <div class="section">
        <div class="header">
          <div>
            <div class="header-title">å‰µä½œå°çš¿</div>
          </div>
          <div class="arrow">â–¶</div>
        </div>

        <div class="body">

          <!-- å‰µä½œå°çš¿ -->
          <div class="section">
            <div class="header">
              <div>
                <div class="header-title recipe-name" data-recipe-id="è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼">
                  è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼
                </div>
              </div>
              <div class="arrow">â–¶</div>
            </div>

            <div class="body">
              <strong>ææ–™</strong><br>
              ãƒ»è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼ï¼š70g<br>
              ãƒ»ã‚¿ãƒ¬ï¼š10cc<br>
              ãƒ»ãŸã¾ã­ãã‚¹ãƒ©ã‚¤ã‚¹ï¼š20g<br>
              ãƒ»ã‹ã‚‰ã—ï¼š2g<br>
              ãƒ»ãã–ã¿ã­ã<br>
              ãƒ»ç³¸ã¨ã†ãŒã‚‰ã—<br>

              <div class="photo-box">
                <div class="photo-grid">
                  <img src="/manuals/torisei_sakura/line/torisei_sakura/è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼.jpg" alt="å®Œæˆä¾‹">
                </div>
              </div>

              <ol class="steps">
                <li>è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼ã‚¹ãƒ©ã‚¤ã‚¹70ï½‡ï¼ˆ7æšï¼‰ã‚’ãƒ¬ãƒ³ã‚¸ã§ï¼—ç§’æ¸©ã‚ã‚‹</li>
                <li>1ã‚’ãƒãƒ¼ãƒŠãƒ¼ã§ã‚ã¶ã‚‹</li>
                <li>ç‰ã­ãã‚¹ãƒ©ã‚¤ã‚¹ã‚’çš¿ã«ç››ã‚Šã€2ã‚’ç››ã‚Šä»˜ã‘ã‚‹</li>
                <li>ä¸Šã‹ã‚‰ãŸã‚Œã‚’ã‹ã‘ã¦çš¿ã®ãµã¡ã«ã‹ã‚‰ã—ã‚’ä¹—ã›ã‚‹</li>
                <li>ãã–ã¿ã­ãã€ç³¸å”è¾›å­ã‚’ãƒˆãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹</li>
              </ol>

              <div class="point">
                <div class="prep-title">ä»•è¾¼ã¿</div>
                <ol class="prep-list">
                  <li>
                    ã‚°ãƒ¬ãƒ¼ãƒ—ãƒ•ãƒ«ãƒ¼ãƒ„ã‚¸ãƒ¥ãƒ¼ã‚¹200ccãƒ»ã—ã‚‡ã†ã‚†200ccãƒ»ç ‚ç³–100gã‚’åˆã‚ã›ã€
                    è±šãƒˆãƒ­5æšï¼ˆç´„2kgåˆ†ï¼‰ã‚’å…¥ã‚Œã¦<strong>1æ—¥æ¼¬ã‘è¾¼ã‚€</strong>
                  </li>
                  <li>
                    æ¼¬ã‘æ±ã‚’åˆ‡ã‚Šã€é‰„æ¿ã§<strong>ä¸¡é¢ã«ç„¼ãç›®</strong>ã‚’ã¤ã‘ã‚‹
                  </li>
                  <li>
                    ã‚¢ãƒ«ãƒŸã§åŒ…ã¿ã€<strong>ä¿æ¸©æ©Ÿã«å…¥ã‚Œã‚‹</strong>
                  </li>
                  <li>
                    ç²—ç†±ãŒå–ã‚ŒãŸã‚‰<strong>å†·è”µä¿å­˜</strong>
                  </li>
                  <li>
                    æ®‹ã£ãŸæ¼¬ã‘æ±ã¯<strong>åŠé‡ã¾ã§ç…®è©°ã‚ã¦ã€Œã‹ã‘ãƒ€ãƒ¬ã€</strong>ã«ã™ã‚‹
                  </li>
                  <li>
                    è±šãƒˆãƒ­ã‚’<strong>1æš10g</strong>ã«ã‚¹ãƒ©ã‚¤ã‚¹ã™ã‚‹
                  </li>
                </ol>
              </div>

              <div class="check-wrap">
                <input
                  type="checkbox"
                  class="check-item"
                  data-key="è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼"
                  onclick="toggleCheck('è±šãƒˆãƒ­ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼')"
                >
                <span class="check-text">ã“ã®é …ç›®ã‚’ç†è§£ã—ã¾ã—ãŸ</span>
              </div>
            </div>
          </div>
          <!-- /å‰µä½œå°çš¿ -->

        </div>
      </div>
      <!-- /ãƒ¡ã‚¤ãƒ³ -->

    </div>
  </div>


</div>

<script>
	document.querySelectorAll(".section").forEach(sec => {
	sec.querySelector(".header").addEventListener("click", (e) => {
		const isOpen = sec.classList.contains("open");
		sec.classList.toggle("open");

		// ã™ã§ã«é–‹ã„ã¦ã„ã‚‹æ™‚ â†’ ä½•ã‚‚ã—ãªã„
		if (isOpen) return;

		// é–‹ã„ãŸç¬é–“ã«ä½ç½®ã‚’è£œæ­£
		setTimeout(() => {
		const rect = sec.getBoundingClientRect().top + window.scrollY;
		const offset = 80; // â† ä¸Šã‹ã‚‰ã©ã‚Œãã‚‰ã„ä½™ç™½ã‚’ç©ºã‘ã‚‹ã‹ï¼ˆstickyå¯¾ç­–ï¼‰
		window.scrollTo({
			top: rect - offset,
			behavior: "smooth"
		});
		}, 10);
	});
	});

</script>

</body>
</html>
